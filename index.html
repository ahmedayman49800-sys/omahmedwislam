<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ´ OmAhmedFood â€” Ø£ÙƒÙ„ Ø¨ÙŠØª Ø£Ù… Ø£Ø­Ù…Ø¯</title>
<style>
body { font-family:'Tahoma',sans-serif; background:#fff8f0; margin:0; padding:0; color:#333;}
header {background:linear-gradient(90deg,#ff8a00,#e52e71);color:white;padding:20px;text-align:center;font-size:1.8em;font-weight:bold;box-shadow:0 4px 8px rgba(0,0,0,0.1);}
.container {max-width:1100px;margin:auto;padding:20px;display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;}
.card {background:white;border-radius:15px;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,0.08);display:flex;flex-direction:column;transition: transform 0.2s;}
.card:hover {transform: translateY(-3px);}
.card img {width:100%;height:180px;object-fit:cover;}
.card-content {padding:15px;flex-grow:1;}
.product-name {font-size:1.2em;font-weight:bold;margin-bottom:10px;}
.price {color:#e52e71;font-weight:bold;font-size:1.1em;}
.qty, .mixed-breakdown, .recipient, .location-field {margin-top:10px;display:flex;flex-direction:column;gap:5px;}
select, input, button {outline:none;}
.footer-controls {grid-column:1 / -1;text-align:center;margin-top:20px;}
.total {font-size:1.4em;font-weight:bold;color:#e52e71;margin-top:10px;}
.btn {display:inline-block;background:linear-gradient(90deg,#ff8a00,#e52e71);color:white;padding:12px 20px;border-radius:10px;font-size:1em;border:none;cursor:pointer;margin-top:15px;transition:0.3s;}
.btn:hover {transform: scale(1.05);}
footer {background:linear-gradient(90deg,#ff8a00,#e52e71);color:white;text-align:center;padding:15px;margin-top:30px;}
.hidden {display:none;}
.mixed-label {font-weight:bold;}
</style>
</head>
<body>

<header>ğŸ´ OmAhmedFood â€” Ø£ÙƒÙ„ Ø¨ÙŠØª Ø£Ù… Ø£Ø­Ù…Ø¯</header>

<div class="container">
  <!-- ÙˆØ±Ù‚ Ø¹Ù†Ø¨ -->
  <div class="card">
      <img alt="" height="1075" src="wr3%20.jpg" width="775">
    <div class="card-content">
      <div class="product-name">ÙˆØ±Ù‚ Ø¹Ù†Ø¨</div>
      <div class="price">1.5 Ø±.Ø³ Ù„Ù„Ø­Ø¨Ù‘Ø©</div>
      <div class="qty"><input type="number" id="waraqEnab" min="0" max="20" value="0"></div>
    </div>
  </div>

  <!-- ÙˆØ±Ù‚ Ù…Ù„ÙÙˆÙ -->
  <div class="card">
      <img src="mlfoof.jpg" alt="ÙˆØ±Ù‚ Ù…Ù„ÙÙˆÙ">
    <div class="card-content">
      <div class="product-name">ÙˆØ±Ù‚ Ù…Ù„ÙÙˆÙ</div>
      <div class="price">1 Ø±.Ø³ Ù„Ù„Ø­Ø¨Ù‘Ø©</div>
      <div class="qty"><input type="number" id="waraqMalfoof" min="0" max="20" value="0"></div>
    </div>
  </div>

  <!-- Ù…Ø´ÙƒÙ„ -->
  <div class="card">
      <img src="mshkl.jpg" alt="Ù…Ø´ÙƒÙ„">
    <div class="card-content">
      <div class="product-name">Ù…Ø´ÙƒÙ„ (ÙÙ„ÙÙ„ØŒ ÙƒÙˆØ³Ø©ØŒ Ø¨Ø§Ø°Ù†Ø¬Ø§Ù†)</div>
      <div class="price">3 Ø±.Ø³ Ù„Ù„Ø­Ø¨Ù‘Ø©</div>
      <div class="qty">
        <input type="number" id="mashakel" min="0" max="20" value="0" onchange="updateMixedOptions()">
      </div>
      <div class="mixed-breakdown hidden" id="mixedBreakdown">
        <label class="mixed-label">ÙÙ„ÙÙ„:</label>
        <select id="mashakelFelfl"></select>
        <label class="mixed-label">ÙƒÙˆØ³Ø©:</label>
        <select id="mashakelKosa"></select>
        <label class="mixed-label">Ø¨Ø§Ø°Ù†Ø¬Ø§Ù†:</label>
        <select id="mashakelBatenjan"></select>
      </div>
    </div>
  </div>

  <!-- Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… -->
  <div class="card">
    <div class="card-content">
      <div class="product-name">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</div>
      <select id="deliveryOption" onchange="toggleLocation()">
        <option value="pickup">Ø§Ø³ØªÙ„Ø§Ù… Ø°Ø§ØªÙŠ (Ø¨Ø¯ÙˆÙ† Ø±Ø³ÙˆÙ…)</option>
        <option value="delivery">ØªÙˆØµÙŠÙ„ (+15 Ø±.Ø³)</option>
      </select>
      <div class="location-field hidden" id="locationField">
        <input type="text" id="deliveryLocation" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙˆØµÙŠÙ„ (ÙÙ‚Ø· ÙÙŠ Ø§Ù„Ø¬Ø¨ÙŠÙ„)">
      </div>
    </div>
  </div>

  <!-- Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙ„Ù… -->
  <div class="card">
    <div class="card-content recipient">
      <input type="text" id="recipientName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙ„Ù…">
    </div>
  </div>

  <div class="footer-controls">
    <div class="total">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span id="totalAmount">0 Ø±.Ø³</span></div>
    <button class="btn" id="verifyOrderBtn">Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨ â€” Verify Order</button>
  </div>
</div>

<footer>
ğŸ“ Ù„Ù„ØªÙˆØ§ØµÙ„: 0530524375 â€” Ø§Ù„Ø¯ÙØ¹ ÙƒØ§Ø´ Ø£Ùˆ Ø­ÙˆØ§Ù„Ø© Ø¨Ù†ÙƒÙŠØ© / STC Pay
</footer>

<script>
function updateTotal(){
    const waraqEnab=parseInt(document.getElementById("waraqEnab").value)||0;
    const waraqMalfoof=parseInt(document.getElementById("waraqMalfoof").value)||0;
    const mashakel=parseInt(document.getElementById("mashakel").value)||0;
    const deliveryOption=document.getElementById("deliveryOption").value;
    let subtotal=(waraqEnab*1.5)+(waraqMalfoof*1)+(mashakel*3);
    if(deliveryOption==="delivery") subtotal+=15;
    document.getElementById("totalAmount").innerText=subtotal+" Ø±.Ø³";
}

function toggleLocation(){
    const deliveryOption=document.getElementById("deliveryOption").value;
    document.getElementById("locationField").style.display=deliveryOption==="delivery"?"flex":"none";
    updateTotal();
}

function updateMixedOptions(){
    const qty=parseInt(document.getElementById("mashakel").value)||0;
    const breakdown=document.getElementById("mixedBreakdown");
    breakdown.classList.toggle("hidden", qty===0);

    const felfl=document.getElementById("mashakelFelfl");
    const kosa=document.getElementById("mashakelKosa");
    const batenjan=document.getElementById("mashakelBatenjan");

    [felfl,kosa,batenjan].forEach(s=>{s.disabled=qty===0; populateOptions(s, qty); s.value="0";});
    
    [felfl,kosa,batenjan].forEach(s=>s.addEventListener("change", updateDependentOptions));
    updateDependentOptions();
}

function populateOptions(selectElement, max){
    selectElement.innerHTML="";
    for(let i=0;i<=max;i++){ selectElement.innerHTML+=`<option value="${i}">${i}</option>`;}
}

function updateDependentOptions(){
    const total=parseInt(document.getElementById("mashakel").value)||0;
    let f=parseInt(document.getElementById("mashakelFelfl").value)||0;
    let k=parseInt(document.getElementById("mashakelKosa").value)||0;
    let b=parseInt(document.getElementById("mashakelBatenjan").value)||0;

    adjustOptions(document.getElementById("mashakelFelfl"), total - k - b, f);
    adjustOptions(document.getElementById("mashakelKosa"), total - f - b, k);
    adjustOptions(document.getElementById("mashakelBatenjan"), total - f - k, b);
}

function adjustOptions(selectElement, max, current){
    const oldValue=current;
    selectElement.innerHTML="";
    for(let i=0;i<=max;i++){ selectElement.innerHTML+=`<option value="${i}">${i}</option>`;}
    selectElement.value=Math.min(oldValue,max);
}

// âœ… Final WhatsApp-friendly message
document.getElementById("verifyOrderBtn").addEventListener("click", function(){
    const waraqEnab=parseInt(document.getElementById("waraqEnab").value)||0;
    const waraqMalfoof=parseInt(document.getElementById("waraqMalfoof").value)||0;
    const mashakel=parseInt(document.getElementById("mashakel").value)||0;
    const felfl=parseInt(document.getElementById("mashakelFelfl").value)||0;
    const kosa=parseInt(document.getElementById("mashakelKosa").value)||0;
    const batenjan=parseInt(document.getElementById("mashakelBatenjan").value)||0;
    const deliveryOption=document.getElementById("deliveryOption").value;
    const location=deliveryOption==="delivery"?document.getElementById("deliveryLocation").value:"Ø§Ø³ØªÙ„Ø§Ù… Ø°Ø§ØªÙŠ";
    const name=document.getElementById("recipientName").value.trim();

    if(!name){alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙ„Ù…"); return;}
    if(deliveryOption==="delivery" && location.trim()===""){alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙˆØµÙŠÙ„"); return;}

    const total=document.getElementById("totalAmount").innerText;

    let lines = [`ğŸ´ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† OmAhmedFood`,
                 `Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙ„Ù…: ${name}`];

    if(waraqEnab>0) lines.push(`ÙˆØ±Ù‚ Ø¹Ù†Ø¨ â€” ${waraqEnab} Ø­Ø¨Ù‘Ø©`);
    if(waraqMalfoof>0) lines.push(`ÙˆØ±Ù‚ Ù…Ù„ÙÙˆÙ â€” ${waraqMalfoof} Ø­Ø¨Ù‘Ø©`);
    if(mashakel>0){
        lines.push(`Ù…Ø´ÙƒÙ„ â€” ${mashakel} Ø­Ø¨Ù‘Ø©`);
        lines.push(`  ÙÙ„ÙÙ„: ${felfl}`);
        lines.push(`  ÙƒÙˆØ³Ø©: ${kosa}`);
        lines.push(`  Ø¨Ø§Ø°Ù†Ø¬Ø§Ù†: ${batenjan}`);
    }

    lines.push(`Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…: ${deliveryOption==="delivery"?"ØªÙˆØµÙŠÙ„":"Ø§Ø³ØªÙ„Ø§Ù… Ø°Ø§ØªÙŠ"}`);
    if(deliveryOption==="delivery") lines.push(`Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ${location} (ÙÙ‚Ø· ÙÙŠ Ø§Ù„Ø¬Ø¨ÙŠÙ„)`);
    lines.push(deliveryOption==="delivery"?"Ø§Ù„Ø¯ÙØ¹: Ø­ÙˆØ§Ù„Ø© Ø¨Ù†ÙƒÙŠØ© / STC Pay Ø¹Ù†Ø¯ Ø§Ù„ØªÙˆØµÙŠÙ„":"Ø§Ù„Ø¯ÙØ¹: Ù†Ù‚Ø¯Ø§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…");
    lines.push(`Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${total}`);
    lines.push(`ğŸ“ ÙŠØ±Ø¬Ù‰ Ø¥Ø±Ø³Ø§Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø·Ù„Ø¨`);

    const finalText = encodeURIComponent(lines.join("\n"));
    window.location.href="https://wa.me/966530524375?text="+finalText;
});

document.querySelectorAll('input[type=number], select').forEach(el=>{el.addEventListener("input",updateTotal); el.addEventListener("change",updateTotal);});
updateTotal(); updateMixedOptions(); toggleLocation();
</script>

</body>
</html>
